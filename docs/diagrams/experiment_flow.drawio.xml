<mxfile host="app.diagrams.net">
  <diagram name="Experiment Flow">
    <mxGraphModel dx="1400" dy="900" grid="1" gridSize="10" guides="1" connect="1" arrows="1">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Spec -->
        <mxCell id="spec" value="ExperimentSpec&#xa;• search space&#xa;• budget&#xa;• protocol"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;"
          vertex="1" parent="1">
          <mxGeometry x="60" y="60" width="220" height="90" as="geometry"/>
        </mxCell>

        <!-- Orchestrator -->
        <mxCell id="orch" value="Trainer Orchestrator&#xa;• trial loop&#xa;• resume&#xa;• idempotent"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#5b9bd5;"
          vertex="1" parent="1">
          <mxGeometry x="360" y="60" width="260" height="100" as="geometry"/>
        </mxCell>

        <!-- Protocol -->
        <mxCell id="protocol" value="Research Protocol&#xa;ablation / curriculum / ensemble"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;"
          vertex="1" parent="1">
          <mxGeometry x="700" y="60" width="260" height="90" as="geometry"/>
        </mxCell>

        <!-- HPO -->
        <mxCell id="hpo" value="HPO Engine&#xa;random / bayes / bandit / halving"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;"
          vertex="1" parent="1">
          <mxGeometry x="60" y="210" width="240" height="90" as="geometry"/>
        </mxCell>

        <!-- Trial Config -->
        <mxCell id="trial" value="TrialConfig&#xa;LoRA params&#xa;LR / rank / alpha"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;"
          vertex="1" parent="1">
          <mxGeometry x="360" y="210" width="220" height="90" as="geometry"/>
        </mxCell>

        <!-- Training -->
        <mxCell id="train" value="Training Skill&#xa;GPU job&#xa;adapter checkpoints"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;"
          vertex="1" parent="1">
          <mxGeometry x="660" y="210" width="240" height="90" as="geometry"/>
        </mxCell>

        <!-- Eval -->
        <mxCell id="eval" value="Eval Skill&#xa;metrics&#xa;benchmarks"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;"
          vertex="1" parent="1">
          <mxGeometry x="960" y="210" width="200" height="90" as="geometry"/>
        </mxCell>

        <!-- Artifact -->
        <mxCell id="artifact" value="Artifact Store&#xa;• adapters&#xa;• metrics&#xa;• sha256"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;"
          vertex="1" parent="1">
          <mxGeometry x="360" y="360" width="240" height="100" as="geometry"/>
        </mxCell>

        <!-- Trace -->
        <mxCell id="trace" value="Trace / WAL&#xa;step events&#xa;resume state"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;"
          vertex="1" parent="1">
          <mxGeometry x="660" y="360" width="220" height="100" as="geometry"/>
        </mxCell>

        <!-- Merge -->
        <mxCell id="merge" value="Merge & Export&#xa;safetensors / gguf / pt"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6ffcc;strokeColor=#82b366;"
          vertex="1" parent="1">
          <mxGeometry x="960" y="360" width="200" height="100" as="geometry"/>
        </mxCell>

        <!-- Dashboard -->
        <mxCell id="dash" value="Dashboard / Report&#xa;markdown + charts"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;"
          vertex="1" parent="1">
          <mxGeometry x="660" y="520" width="220" height="90" as="geometry"/>
        </mxCell>

        <!-- Edges -->
        <mxCell id="e1" edge="1" parent="1" source="spec" target="orch" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e2" edge="1" parent="1" source="orch" target="protocol" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell id="e3" edge="1" parent="1" source="orch" target="hpo" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e4" edge="1" parent="1" source="hpo" target="trial" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e5" edge="1" parent="1" source="trial" target="train" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e6" edge="1" parent="1" source="train" target="eval" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell id="e7" edge="1" parent="1" source="eval" target="artifact" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e8" edge="1" parent="1" source="train" target="trace" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e9" edge="1" parent="1" source="eval" target="trace" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell id="e10" edge="1" parent="1" source="artifact" target="merge" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e11" edge="1" parent="1" source="artifact" target="dash" style="endArrow=block;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Loop back -->
        <mxCell id="e12" edge="1" parent="1" source="eval" target="hpo"
          style="endArrow=block;dashed=1;html=1;"><mxGeometry relative="1" as="geometry"/></mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
